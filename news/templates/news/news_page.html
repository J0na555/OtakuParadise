{% extends "base.html" %}
{% load static %}
{% block title %} News - Otaku Paradise {% endblock %}

{% block content %}
    <h1>News</h1> 

    <form action="" method="get">
        <input type="text" name="q", placeholder="Search by anime" value="{{ query }}">
        <button action="submit" >Search</button>
    </form>


    {% if search %}
        <h2>Search results</h2>    
        <ul>
            {% for article in search %}
                <li>
                    <h2>{{ newss.title }}</h2>
                    {% if newss.images.jpg.image_url %}
                        <img src="{{ newss.images.jpg.image_url}}" alt="{{ newss.title }}" width="250"><br>
                    {% endif %}
                    <p>By: {{ newss.author_username|default:"Unknown" }}</p>
                    <p>{{ newss.date|date:"F j, Y, g:i a" }}</p>
                    <a href="{{ newss.url }}" target="_blank">Read full article ➡️</a>
                </li>
            {% endfor %}
        </ul>
    {% endif %}

    <ul>
        {% for newss in news %}
            <li>
                <h2>{{ newss.title }}</h2>
                {% if newss.images.jpg.image_url %}
                    <img src="{{ newss.images.jpg.image_url}}" alt="{{ newss.title }}" width="250"><br>
                {% endif %}
                <p>By: {{ newss.author_username|default:"Unknown" }}</p>
                <p>{{ newss.date|date:"F j, Y, g:i a" }}</p>
                <a href="{{ newss.url }}" target="_blank">Read full article ➡️</a>
            </li>
        {% endfor %}
    </ul>


    <div class="pagination-container" >
        {% if pagination.has_previous_page %}
            <a href="?page={{ current_page|add:"-1" }}">
               <i class="fas fa-chevron-left me-1"></i> Previous
            </a>
        {% else %}
            <span class="pagination-btn disabled">
                <i class="fas fa-chevron-left me-1"></i> Previous
            </span>
        {% endif %}

        <div class="pagination-info" >
            page <span> {{ current_page }}</span>
        </div>

        {% if pagination.has_next_page %}
            <a href="?page={{ current_page|add:"1" }}">
                Next <i class="fas fa-chevron-right ms-1"></i>
            </a>
        {% else %}
            <span class="pagination-btn disabled">
                Next <i class="fas fa-chevron-right ms-1"></i>
            </span>
        {% endif %}
    </div>    
{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'manga/css/manga.css' %}">
{% endblock %}